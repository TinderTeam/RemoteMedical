<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">


<struts>
<constant name="struts.ui.theme" value="simple" />
<constant name="struts.enable.DynamicMethodInvocation" value="true"/>
<constant name="struts.ui.templateDir" value="template" />
<constant  name="struts.custom.i18n.resources" value="package"></constant>   

<constant name="struts.ui.templateSuffix" value="ftl" />
<constant name="struts.i18n.encoding" value="UTF-8" />    
 <package name="misp" namespace="/" extends="struts-default" abstract="true">
     <interceptors>
           <interceptor-stack name="logException">
              <interceptor-ref name="defaultStack" />
 
              <interceptor-ref name="exception">
                  <param name="logEnabled">true</param>
                  <param name="logLevel">info</param>             
              </interceptor-ref>
           </interceptor-stack>
       </interceptors>
 
       <default-interceptor-ref name="logException"/>
   
         <global-results>
            <result name="misp-done">/client/misp/common/mispDone.jsp</result>
             
            <result name="exception-system">/client/misp/common/systemError.jsp</result>
 
            <result name="exception-service">/client/misp/common/operateError.jsp</result>
        </global-results>
             
        <global-exception-mappings>
            <exception-mapping result="exception-system" exception="java.lang.Exception"></exception-mapping>
            
            <exception-mapping result="exception-service" exception="cn.fuego.common.exception.SystemOperateException"></exception-mapping>
        </global-exception-mappings>    
    </package>
    
	<package name="login" extends="misp">
		<action name="login" class="cn.fuego.misp.web.action.login.LoginAction">
			<result type="redirect">/client/misp/home.jsp</result>
			<result type="chain" name="Index">
			  <param name="actionName">ReportManage</param>
            </result>    
			<result name="home">/client/misp/login.jsp</result>
			
			<result type="chain" name="LoginFailed">
			  <param name="actionName">login</param>
			  <param name="method">home</param>
				<param name="message">${message}</param>
			</result>		    
			<result name="validateCode" >/client/misp/login.jsp
			</result>			
		 
		</action>
		<action name="ValidateImage" class="cn.fuego.misp.web.action.login.ValidateImageAction" method="createImage">     
            <result type="stream">    
                 <param name="contentType">image/jpeg</param>    
                 <param name="inputName">codeStream</param>    
             </result>      
		</action> 		  
 

 	</package>
 		<package name="log" extends="misp">
		<action name="LogManage" class="cn.fuego.misp.web.action.log.LogManageAction">
			<result>/client/misp/log/logManage.jsp</result>
 
 		</action>
 
 	</package>
 	<package name="report" extends="misp">
  
   		<action name="ReportManage" class="cn.fuego.remote.medical.manage.web.action.report.ReportManageAction">
			<result type="dispatcher">/client/manage/diagnoseCount.jsp</result>
 			<result type="dispatcher" name="cost">/client/manage/costCount.jsp</result>
 			
 		</action>
 
 	</package>
 	<package name="user" extends="misp">
  
  		<action name="UserManage" class="cn.fuego.remote.medical.manage.web.action.user.UserManageAction">
			<result type="dispatcher">/client/manage/userManage.jsp</result>
			<result type="dispatcher" name="LoginFailed">/client/misp/login.jsp</result>	
			<result type="dispatcher" name="showInfo">/client/manage/userManage.jsp</result>	
			<result type="dispatcher" name="editInfo">/client/manage/newUser.jsp</result>
		</action>
   		<action name="HospitalManage" class="cn.fuego.remote.medical.manage.web.action.user.HospitalManageAction">
			<result type="dispatcher">/client/manage/hospitalManage.jsp</result>

			<result type="dispatcher" name="showInfo">/client/manage/cbb/hospitalInfo.jsp</result>	
		    
		</action>
		
   		<action name="ExpertManage" class="cn.fuego.remote.medical.manage.web.action.user.ExpertManageAction">
			<result type="dispatcher">/client/manage/expertManage.jsp</result>

			<result type="dispatcher" name="showInfo">/client/manage/cbb/expertInfo.jsp</result>	

			<result type="dispatcher" name="addExpert">/client/manage/addExpert.jsp</result>							    
			<result name="signName" type="stream">
				<param name="contentType">image/jpeg/png</param>
				<param name="inputName">signNameStream</param>
			</result>
			<result name = "expertPhoto" type="stream">
				<param name="contentType">image/jpeg/png</param>
				<param name="inputName">expertStream</param>
			</result>
		</action> 

		<action name="ApprovalManage" class="cn.fuego.remote.medical.manage.web.action.user.ApprovalManageAction">
			<result type="dispatcher">/client/manage/approvalManage.jsp</result>
			<result type="dispatcher" name="showModifyHospital">/client/manage/hospitalInfoCheck.jsp</result>
			<result type="dispatcher" name="showModifyExpert">/client/manage/expertInfoCheck.jsp</result>
			<result type="dispatcher" name="showAddExpert">/client/manage/linkInfo.jsp</result>
		</action>
 
 	</package>
 
</struts>

